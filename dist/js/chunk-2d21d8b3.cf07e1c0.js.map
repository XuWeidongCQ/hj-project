{"version":3,"sources":["webpack:///./src/components/RoleManage.vue?4b6f","webpack:///./src/components/RoleManageComp/RoleDetailTable.vue?eabf","webpack:///src/components/RoleManageComp/RoleDetailTable.vue","webpack:///./src/components/RoleManageComp/RoleDetailTable.vue?ced7","webpack:///./src/components/RoleManageComp/RoleDetailTable.vue","webpack:///src/components/RoleManage.vue","webpack:///./src/components/RoleManage.vue?2e56","webpack:///./src/components/RoleManage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","_v","on","addNewRole","_m","_l","role","key","roleId","_s","roleName","menuList","createTime","remark","$event","editRole","delRoleInfo","attrs","formTitle","formRenderData","submit","isFormShown","_e","component"],"mappings":"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","file":"js/chunk-2d21d8b3.cf07e1c0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-views-wrapper\"},[_c('div',{staticClass:\"xu-row\"},[_c('div',{staticClass:\"xu-col-12\"},[_c('role-detail-table')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"xubox\"},[_c('div',{staticClass:\"xubox-title\"},[_c('span',[_vm._v(\"角色情况\")]),_c('span',{staticClass:\"xu-indicator xu-indicator-add xu-float-right\",on:{\"click\":_vm.addNewRole}},[_vm._v(\"新增角色\")])]),_c('div',{staticClass:\"xubox-content\"},[_c('table',{staticClass:\"xu-table xu-table-center xu-table-hover xu-table-strip\"},[_vm._m(0),_c('tbody',_vm._l((_vm.roleInfos),function(role){return _c('tr',{key:role.roleId},[_c('td',[_vm._v(_vm._s(role.roleId))]),_c('td',[_vm._v(_vm._s(role.roleName))]),_c('td',[_vm._v(_vm._s(role.menuList))]),_c('td',[_vm._v(_vm._s(role.createTime))]),_c('td',[_vm._v(_vm._s(role.remark))]),_c('td',[_c('span',{staticClass:\"xu-indicator xu-indicator-edit\",on:{\"click\":function($event){return _vm.editRole(role)}}},[_vm._v(\"修改\")]),_c('span',{staticClass:\"xu-indicator xu-indicator-delete\",on:{\"click\":function($event){return _vm.delRoleInfo(role.roleId)}}},[_vm._v(\"删除\")])])])}),0)])]),(_vm.isFormShown)?_c('xu-form',{attrs:{\"is-pop-up\":true,\"form-title\":_vm.formTitle,\"render-data\":_vm.formRenderData},on:{\"submit\":function($event){return _vm.submit($event)},\"close\":function($event){_vm.isFormShown = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',{staticClass:\"xu-bg-silver\"},[_c('tr',[_c('th',[_vm._v(\"#ID\")]),_c('th',[_vm._v(\"角色名称\")]),_c('th',[_vm._v(\"可查看\")]),_c('th',[_vm._v(\"创建时间\")]),_c('th',[_vm._v(\"备注\")]),_c('th',[_vm._v(\"操作\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"xubox\">\r\n        <div class=\"xubox-title\">\r\n            <span>角色情况</span>\r\n            <span class=\"xu-indicator xu-indicator-add xu-float-right\" @click=\"addNewRole\">新增角色</span>\r\n        </div>\r\n        <div class=\"xubox-content\">\r\n            <table class=\"xu-table xu-table-center xu-table-hover xu-table-strip\">\r\n                <thead class=\"xu-bg-silver\">\r\n                <tr>\r\n                    <th>#ID</th>\r\n                    <th>角色名称</th>\r\n                    <th>可查看</th>\r\n                    <th>创建时间</th>\r\n                    <th>备注</th>\r\n                    <th>操作</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"role in roleInfos\" :key=\"role.roleId\">\r\n                    <td>{{role.roleId}}</td>\r\n                    <td>{{role.roleName}}</td>\r\n                    <td>{{role.menuList}}</td>\r\n                    <td>{{role.createTime}}</td>\r\n                    <td>{{role.remark}}</td>\r\n                    <td>\r\n                        <span class=\"xu-indicator xu-indicator-edit\" @click=\"editRole(role)\">修改</span>\r\n                        <span class=\"xu-indicator xu-indicator-delete\" @click=\"delRoleInfo(role.roleId)\">删除</span>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <xu-form v-if=\"isFormShown\"\r\n                 :is-pop-up=\"true\"\r\n                 :form-title=\"formTitle\"\r\n                 :render-data=\"formRenderData\"\r\n                 @submit=\"submit($event)\"\r\n                 @close=\"isFormShown = false\">\r\n        </xu-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import XuForm from \"@/components/CommonComponents/XuComponent/XuForm\";\r\n  export default {\r\n    name: \"RoleDetailTable\",\r\n    components: {XuForm},\r\n    data(){\r\n      return {\r\n        roleInfos:[],//存放获取的角色信息\r\n        menuInfos:[],//存放获取的菜单项目\r\n        isFormShown:false,//是否显示信息窗口\r\n        formRenderData:[],//用于表单渲染的数据\r\n        formTitle:'',//信息窗口标题\r\n        submitType:0,//信息窗口提交事件的类型，0-post，1-put\r\n        selectedRole:null,//被选中的角色\r\n      }\r\n    },\r\n    methods:{\r\n      //1.获取所有数据\r\n      getRoleCollectionInfos: function () {\r\n        this.$Http['roleManage']['getRoleInfos']()\r\n          .then(res => {\r\n            this.roleInfos = [];\r\n            // console.log(res);\r\n            res.forEach(ele => {\r\n              const {menuList} = ele;\r\n              this.roleInfos.push({\r\n                roleId:ele['id'],\r\n                roleName:ele['roleName'],\r\n                menuList:menuList.map(value => {return value['id'] +'-'+ value['name']}).join('，') || '无任何权限',\r\n                remark:ele['remark'] || '无',\r\n                createTime:ele['createTime']\r\n              })\r\n            });\r\n            // console.log(this.roleInfos);\r\n          })\r\n      },\r\n      //2.获取所有菜单项目\r\n      getMenuInfos: function () {\r\n        this.menuInfos = [];\r\n        this.$Http['roleManage']['getMenuInfos']()\r\n          .then(res => {\r\n            // console.log(res);\r\n            res.forEach(ele => {\r\n              if (true || ele['type'] === 1){//type表示菜单的类型\r\n                this.menuInfos.push({\r\n                  menuId:ele['id'],\r\n                  menuName:ele['name']\r\n                })\r\n              }\r\n            });\r\n            // console.log(this.menuInfos)\r\n          })\r\n      },\r\n      //3.新建一个角色\r\n      addNewRole:function () {\r\n        // console.log();\r\n        this.formTitle = '添加角色';\r\n        this.submitType = 0;\r\n        this.formRenderData = [\r\n          {content:'角色名称：',value:'',field:'roleName'},\r\n          {content:'权限：',\r\n           value:[],field:'menuList',\r\n           additionalInfo:{type:'checkbox',optional:this.menuInfos.map(value => value['menuName'])}},\r\n          {content:'备注：',value:'无',field:'remark',additionalInfo:{type:'textarea'}},\r\n        ];\r\n        this.isFormShown = true;\r\n      },\r\n      //4.删除一个角色\r\n      delRoleInfo: function(roleId){\r\n        this.$Http['roleManage']['delRoleInfo'](roleId)\r\n        .then(res => {\r\n          res && this.getRoleCollectionInfos()\r\n        })\r\n      },\r\n      //5.修改一个角色\r\n      editRole:function(role){\r\n        // console.log(role['menuList']);\r\n        this.selectedRole = role;\r\n        let menuList;\r\n        if (role['menuList'] === '无任何权限'){\r\n          menuList = []\r\n        } else {\r\n          menuList = role['menuList'].split('，').map(value => value.split('-')[1])\r\n        }\r\n        this.formTitle = '修改角色信息';\r\n        this.submitType = 1;\r\n        this.formRenderData = [\r\n          {content:'角色名称：',value:role['roleName'],field:'roleName'},\r\n          {content:'权限：',\r\n           value:menuList,\r\n           field:'menuList',\r\n           additionalInfo:{type:'checkbox',optional:this.menuInfos.map(value => value['menuName'])},\r\n          },\r\n          {content:'备注：',value:role['remark'],field:'remark',additionalInfo:{type:'textarea'}},\r\n        ];\r\n        this.isFormShown = true;\r\n      },\r\n      //*.信息窗口的提交按钮事件\r\n      submit:function (formData) {\r\n        // console.log(formData['menuList']);\r\n        formData['menuList'] = formData['menuList'].map(value => {\r\n          let menuId = 0;\r\n          this.menuInfos.forEach(ele => {\r\n            if (ele['menuName'] === value){\r\n              menuId = ele['menuId']\r\n            }\r\n          });\r\n          return {id:menuId}\r\n        });\r\n        // formData['menuList'] = fixedMenuList;\r\n        switch (this.submitType) {\r\n          //添加角色\r\n          case 0:\r\n            // console.log(formData);\r\n            this.$Http['roleManage']['postRoleInfo'](formData)\r\n            .then(res => {\r\n              res && this.getRoleCollectionInfos()\r\n            });\r\n            break;\r\n          //修改角色\r\n          case 1:\r\n            console.log(formData);\r\n            formData['id'] = this.selectedRole['roleId'];\r\n            this.$Http['roleManage']['editRoleInfo'](formData)\r\n            .then(res => {\r\n              // console.log(res);\r\n              res && this.getRoleCollectionInfos();\r\n            });\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n      this.getRoleCollectionInfos();\r\n      this.getMenuInfos();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleDetailTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleDetailTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleDetailTable.vue?vue&type=template&id=367775bc&scoped=true&\"\nimport script from \"./RoleDetailTable.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleDetailTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"367775bc\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"vue-views-wrapper\">\r\n        <div class=\"xu-row\">\r\n            <div class=\"xu-col-12\">\r\n                <role-detail-table>\r\n                </role-detail-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import RoleDetailTable from \"@/components/RoleManageComp/RoleDetailTable\";\r\n  export default {\r\n    name: \"RoleManage\",\r\n    components: {RoleDetailTable},\r\n    methods:{\r\n\r\n    },\r\n    created(){\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleManage.vue?vue&type=template&id=44569c95&scoped=true&\"\nimport script from \"./RoleManage.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleManage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44569c95\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}