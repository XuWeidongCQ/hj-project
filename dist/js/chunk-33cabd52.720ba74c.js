(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33cabd52"],{"0062":function(t,e,a){},"03c1":function(t,e,a){"use strict";var s=a("67a5"),n=a.n(s);n.a},1312:function(t,e,a){"use strict";var s=a("a10b"),n=a.n(s);n.a},"3cf5":function(t,e,a){"use strict";var s=a("936e"),n=a.n(s);n.a},"43b2":function(t,e,a){"use strict";var s=a("faf9"),n=a.n(s);n.a},"50cd":function(t,e,a){},5683:function(t,e,a){},"67a5":function(t,e,a){},"6cc0":function(t,e,a){"use strict";var s=a("0062"),n=a.n(s);n.a},"8eac":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-views-wrapper"},[a("div",{staticClass:"xu-row mb-integer"},[a("div",{staticClass:"xu-col-6"},[t.asyncFlag?a("chart-statics",{attrs:{"chart-data":t.forChartData}}):t._e()],1),a("div",{staticClass:"xu-col-3"},[a("about-company",{attrs:{"model-infos-in-company":t.modelInfosInCompany}})],1),a("div",{staticClass:"xu-col-3"},[a("about-model",{attrs:{"company-infos-in-model":t.companyInfosInModel}})],1)]),a("div",{staticClass:"xu-row mb-integer"},[a("div",{staticClass:"xu-col-4"},[a("div",{staticClass:"comp-static-wrapper"},[a("p",{staticClass:"static-item"},[t._v(t._s(t._f("msFilter")(t.minMaxStatistical.averageLife)))]),a("p",[t._v("报废设备平均使用寿命")])])]),a("div",{staticClass:"xu-col-4"},[a("div",{staticClass:"comp-static-wrapper"},[a("p",[t._v(t._s(t._f("msFilter")(t.minMaxStatistical.minLife)))]),a("p",[t._v("最小使用寿命")]),a("p",[t._v("设备编号："+t._s(t.minMaxStatistical.minLifeDeviceCsNumber))])])]),a("div",{staticClass:"xu-col-4"},[a("div",{staticClass:"comp-static-wrapper"},[a("p",[t._v(t._s(t._f("msFilter")(t.minMaxStatistical.maxLife)))]),a("p",[t._v("最大使用寿命")]),a("p",[t._v("设备编号："+t._s(t.minMaxStatistical.maxLifeDeviceCsNumber))])])])]),a("div",{staticClass:"xu-row"},[a("div",{staticClass:"xu-col-12"},[a("device-table")],1)])])},n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox"},[t._m(0),a("div",{staticClass:"xubox-content"},[a("xu-chart",{attrs:{type:"line",legend:{show:!0,orient:"vertical",top:5,right:0,textStyle:{fontSize:11}},"chart-style":{height:"250px"},"y-axis":{type:"value",name:"设备数量",nameLocation:"middle",nameGap:25},"x-axis":{type:"category"},"series-name":{y:"设备总数",y1:"在线设备",y2:"正常设备",y3:"报废设备",y4:"报警设备"},data:t.chartData}})],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox-title"},[a("span",[t._v("趋势分析")])])}],l=a("80c0"),c={name:"ChartStatics",components:{XuChart:l["a"]},props:{chartData:{type:Object,default:function(){}}},data:function(){return{}}},r=c,u=(a("6cc0"),a("2877")),d=Object(u["a"])(r,o,i,!1,null,"0e11d570",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox"},[t._m(0),a("div",{staticClass:"xubox-content"},[a("div",{staticClass:"scrollBar-style comp-about-company-table-wrapper"},[a("table",{staticClass:"xu-table xu-table-sm xu-table-hover xu-table-strip"},[t._m(1),a("tbody",{staticClass:"comp-about-company-small"},t._l(t.modelInfosInCompany,function(e){return a("tr",[a("td",[t._v(t._s(e.companyName))]),a("td",[a("span",[t._v(t._s(e.totalModelNum))]),e.totalModelNum>0?a("span",{staticClass:"xu-indicator xu-indicator-check",on:{click:function(a){return t.showDetailPopUp(e.companyName,e.modelInfos,e.monthlyModel)}}},[t._v("详情")]):t._e()])])}),0)])])]),t.isDetailPopUpShow?a("detail-pop-up",{attrs:{title:t.selectedCompanyName,"model-infos":t.selectedModelInfos,"monthly-model":t.selectedMonthlyModel},on:{close:function(e){t.isDetailPopUpShow=!1}}}):t._e()],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox-title"},[a("span",[t._v("公司-机型概况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"xu-bg-silver"},[a("tr",[a("th",[t._v("公司名称")]),a("th",[t._v("机型数量")])])])}],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("xu-modal",{attrs:{shown:!0,"header-shown":!0,"model-style":{marginTop:"150px",width:"1000px"}},on:{close:t.close}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.title)+"-机型详情")])]),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"xu-row"},[a("div",{staticClass:"xu-col-4"},[a("div",{staticClass:"scrollBar-style comp-fix-height"},[a("table",{staticClass:"xu-table xu-table-hover xu-table-sm xu-table-center"},[a("thead",{staticClass:"xu-bg-silver"},[a("tr",[a("th",[t._v("机型名称")]),a("th",[t._v("机型数量")])])]),a("tbody",t._l(t.modelInfos,function(e){return a("tr",[a("td",[t._v(t._s(e.modelName))]),a("td",[t._v(t._s(e.modelNum))])])}),0)])])]),a("div",{staticClass:"xu-col-8"},[a("div",{staticClass:"xubox"},[a("div",{staticClass:"xubox-title"},[a("span",{staticClass:"xu-text-level2"},[t._v("月份新增设备统计")])]),a("div",{staticClass:"xubox-content"},[a("xu-chart",{attrs:{type:"bar","chart-style":{height:"250px"},"y-axis":{type:"value",name:"设备数量",nameLocation:"middle",nameGap:25},"x-axis":{type:"category"},data:t.monthlyModel}})],1)])])])])])],1)},v=[],x=a("c41d"),b={name:"DetailPopUp",components:{XuModal:x["a"],XuChart:l["a"]},props:{title:{type:String,default:""},modelInfos:{type:Array,default:function(){return[]}},monthlyModel:{type:Object,default:function(){return{}}}},methods:{close:function(){this.$emit("close")}}},y=b,_=(a("cc03"),Object(u["a"])(y,h,v,!1,null,"565acb49",null)),C=_.exports,g={name:"AboutCompany",components:{DetailPopUp:C},props:{modelInfosInCompany:{type:Array,default:function(){return[]}}},data:function(){return{isDetailPopUpShow:!1,selectedCompanyName:"",selectedModelInfos:[],selectedMonthlyModel:{}}},methods:{showDetailPopUp:function(t,e,a){this.selectedCompanyName=t,this.selectedModelInfos=e,this.selectedMonthlyModel=a,this.isDetailPopUpShow=!0}}},D=g,N=(a("03c1"),Object(u["a"])(D,p,f,!1,null,"ebe7ea7e",null)),w=N.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox"},[t._m(0),a("div",{staticClass:"xubox-content"},[a("div",{staticClass:"scrollBar-style comp-about-model-table-wrapper"},[a("table",{staticClass:"xu-table xu-table-sm xu-table-hover xu-table-strip"},[t._m(1),a("tbody",{staticClass:"comp-about-company-small"},t._l(t.companyInfosInModel,function(e){return a("tr",[a("td",[t._v(t._s(e.modelName))]),a("td",[a("span",[t._v(t._s(e.totalCompanyNum))]),e.totalCompanyNum>0?a("span",{staticClass:"xu-indicator xu-indicator-check",on:{click:function(a){return t.showDetailPopUp(e.modelName,e.companyInfos)}}},[t._v("详情")]):t._e()])])}),0)])])]),t.isDetailPopUpShow?a("company-detail-pop-up",{attrs:{title:t.selectedModel,"company-infos":t.selectedCompanyInfos},on:{close:function(e){t.isDetailPopUpShow=!1}}}):t._e()],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox-title"},[a("span",[t._v("机型-公司概况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"xu-bg-silver"},[a("tr",[a("th",[t._v("机型名称")]),a("th",[t._v("公司数量")])])])}],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("xu-modal",{attrs:{shown:!0,"header-shown":!0,"model-style":{marginTop:"150px",width:"400px"}},on:{close:t.close}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.title)+"-公司详情")])]),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"scrollBar-style comp-fix"},[a("table",{staticClass:"xu-table xu-table-hover xu-table-sm xu-table-center"},[a("thead",{staticClass:"bg-info xu-text-white-level0"},[a("tr",[a("th",[t._v("公司名称")]),a("th",[t._v("机型数量")])])]),a("tbody",t._l(t.companyInfos,function(e){return a("tr",[a("td",[t._v(t._s(e.companyName))]),a("td",[t._v(t._s(e.companyNum))])])}),0)])])])])],1)},P=[],F={name:"CompanyDetailPopUp",components:{XuModal:x["a"]},props:{title:{type:String,default:""},companyInfos:{type:Array,default:function(){return[]}}},methods:{close:function(){this.$emit("close")}}},$=F,E=(a("3cf5"),Object(u["a"])($,S,P,!1,null,"2a23f0bc",null)),k=E.exports,O={name:"AboutModel",components:{CompanyDetailPopUp:k},props:{companyInfosInModel:{type:Array,default:function(){return[]}}},data:function(){return{isDetailPopUpShow:!1,selectedModel:"",selectedCompanyInfos:[]}},methods:{showDetailPopUp:function(t,e){this.selectedModel=t,this.selectedCompanyInfos=e,this.isDetailPopUpShow=!0}}},U=O,L=(a("e63e"),Object(u["a"])(U,M,I,!1,null,"40bee54b",null)),V=L.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox"},[t._m(0),a("div",{staticClass:"xubox-content"},[a("div",[a("xu-select",{attrs:{options:t.searchFields},model:{value:t.selectedField,callback:function(e){t.selectedField=e},expression:"selectedField"}}),a("span",{staticClass:"comp-input-inter"},[t._v("—")]),"设备状态"===t.selectedField?a("xu-select",{attrs:{options:["不限","正常","报警","报废"]},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}}):a("label",{staticClass:"xu-label-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"xu-input",attrs:{type:"text",placeholder:"请输入"+t.selectedField},domProps:{value:t.selectedValue},on:{input:function(e){e.target.composing||(t.selectedValue=e.target.value)}}})]),a("button",{staticClass:"xu-btn xu-btn-info ml-integer",on:{click:t.searchDevices}},[t._v("搜索")])],1),a("table",{staticClass:"xu-table xu-table-hover xu-table-center xu-table-strip"},[a("thead",{staticClass:"xu-bg-silver"},[a("tr",[a("th",[t._v("状态")]),a("th",[t._v("设备编号")]),a("th",[t._v("机型名称")]),a("th",[t._v("北斗卡号")]),a("th",[t._v("5G接口")]),a("th",[t._v("公司")]),t.auth.includes("停止工作")||t.auth.includes("恢复工作")?a("th",[t._v("启用")]):t._e(),a("th",[t._v("出厂日期")]),t.auth.includes("单点监控")?a("th",[t._v("操作")]):t._e()])]),a("tbody",t._l(t.deviceInfos,function(e){return a("tr",[a("td",[a("span",{staticClass:"xu-badge",class:{"xu-badge-success":1===e.status,"xu-badge-error":0===e.status,"xu-badge-warning":2===e.status}},[t._v("\n                            "+t._s(t._f("statusFilter")(e.status))+"\n                        ")])]),a("td",[t._v(t._s(e.csNumber))]),a("td",[t._v(t._s(e.modelName))]),a("td",[t._v(t._s(e.beidouId))]),a("td",[t._v(t._s(e.ipPort))]),a("td",[t._v(t._s(e.companyName))]),t.auth.includes("停止工作")||t.auth.includes("恢复工作")?a("td",[a("xu-switch",{attrs:{value:t._f("rotateStatusFilter")(e.rotateStatus)},on:{hasSelected:function(a){return t.changeRotateStatus(a,e.id)}}})],1):t._e(),a("td",[t._v(t._s(e.factoryDate))]),t.auth.includes("单点监控")?a("td",[a("span",{staticClass:"xu-indicator xu-indicator-check",on:{click:function(a){return t.showSingleMonitor(e)}}},[t._v("单点监控")])]):t._e()])}),0)]),a("div",{staticClass:"xu-text-center"},[a("xu-page-nav",{attrs:{"is-shown":!0,size:t.serverData.size,"now-page":t.serverData.number,"total-elements":t.serverData.totalElements,"total-page":t.serverData.totalPages},on:{selectedPage:function(e){return t.jumpSelectedPage(e)}}})],1)]),t.isSingleMonitorVisible?a("single-monitor-pop-up",{attrs:{"device-info":t.selectedDevice},on:{close:function(e){t.isSingleMonitorVisible=!1}}}):t._e()],1)},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xubox-title"},[a("span",[t._v("设备概况")])])}],T=(a("7f7f"),a("ac6a"),a("be73")),X=a("9502"),B=a("a483"),H=a("f5e7"),z={name:"DeviceTable",components:{SingleMonitorPopUp:T["a"],XuPageNav:X["a"],XuSelect:B["a"],XuSwitch:H["a"]},data:function(){return{selectedDevice:{},isSingleMonitorVisible:!1,serverData:{},deviceInfos:[],searchInfo:{csNumberOrFactoryDate:null,modelName:null,companyName:null,factoryDate:null,status:null},searchData:[{name:"设备编号",field:"csNumberOrFactoryDate"},{name:"机型名称",field:"modelName"},{name:"公司名称",field:"companyName"},{name:"出厂日期",field:"factoryDate"},{name:"设备状态",field:"status"}],selectedField:"设备编号",selectedValue:"",searchFields:["设备编号","机型名称","公司名称","出厂日期","设备状态"],auth:this.$store.getters["getLoginInfo"]["auth"]["buttonAuthList"]}},filters:{statusFilter:function(t){switch(t){case 0:return"报废";case 1:return"正常";case 2:return"报警";default:return"未知"}},rotateStatusFilter:function(t){switch(t){case 0:return"off";case 1:return"on";default:return"on"}}},methods:{showSingleMonitor:function(t){this.selectedDevice={id:t.id,modelName:t.modelName,companyName:t.companyName,rotateStatus:t.rotateStatus},this.isSingleMonitorVisible=!0},getTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.deviceInfos=[],this.$Http["deviceManage"]["searchDevices"](this.searchInfo,{},"?start="+e).then(function(e){t.serverData=e;var a=e.content;console.log(a),a.forEach(function(e){t.deviceInfos.push({id:e.id,companyName:e["company"]["name"],modelNumber:e["model"]["modelNumber"],modelName:e["model"]["modelName"],csNumber:e["csNumber"],beidouId:e["beidouId"],factoryDate:e["factoryDate"],status:e["status"],rotateStatus:e["rotateStatus"],ipPort:null===e["ipPort"]?"暂无":e["ipPort"]})})})},jumpSelectedPage:function(t){this.getTableData(t-1)},searchDevices:function(){var t=this,e={field:this.selectedField,value:this.selectedValue},a="";if("设备状态"===e.field){switch(e.value){case"报废":a=0;break;case"正常":a=1;break;case"报警":a=2;break;case"不限":a=null;break}e.value=a}this.searchData.forEach(function(a){a["name"]===e.field&&(t.searchInfo[a["field"]]=e.value,t.selectedValue="",t.getTableData())})},changeRotateStatus:function(t,e){var a={id:e};switch(t){case"on":this.$Http["deviceManage"]["enableEngine"](a).then();break;case"off":this.$Http["deviceManage"]["disableEngine"](a).then()}}},created:function(){this.getTableData()}},G=z,J=(a("43b2"),Object(u["a"])(G,j,A,!1,null,"194ba6a6",null)),R=J.exports,q={name:"DeviceManage",components:{ChartStatics:m,AboutCompany:w,AboutModel:V,DeviceTable:R},data:function(){return{asyncFlag:!1,forChartData:{x:[],y:[],y1:[],y2:[],y3:[],y4:[]},modelInfosInCompany:[],companyInfosInModel:[],minMaxStatistical:{}}},methods:{getCollectionInfos:function(){var t=this;this.$Http["deviceManage"]["getCollectionInfos"]().then(function(e){var a=e.StatisticalInfo,s=e.aboutCompany,n=e.aboutModel,o=e.scrapDeviceLife;for(var i in a)a.hasOwnProperty(i)&&(t.forChartData["x"].push(i),t.forChartData["y"].push(a[i]["totalNum"]),t.forChartData["y1"].push(a[i]["onlineNum"]),t.forChartData["y2"].push(a[i]["normalNum"]),t.forChartData["y3"].push(a[i]["scrapNumber"]),t.forChartData["y4"].push(a[i]["alarmNum"]));for(var l in t.asyncFlag=!0,s)if(s.hasOwnProperty(l)){var c=s[l],r=c.totalNumber,u=c.deviceChange;delete s[l]["totalNumber"],delete s[l]["deviceChange"];var d=[],m={x:[],y:[]};for(var p in s[l])s[l].hasOwnProperty(p)&&d.push({modelName:p,modelNum:s[l][p]});for(var f in u)u.hasOwnProperty(f)&&(m["x"].push(f),m["y"].push(u[f]));t.modelInfosInCompany.push({companyName:l,totalModelNum:r,modelInfos:d,monthlyModel:m})}for(var h in n)if(n.hasOwnProperty(h)){var v=n[h].totalNumber;delete n[h]["totalNumber"];var x=[];for(var b in n[h])n[h].hasOwnProperty(b)&&x.push({companyName:b,companyNum:n[h][b]});t.companyInfosInModel.push({modelName:h,totalCompanyNum:v,companyInfos:x})}t.minMaxStatistical["averageLife"]=o["平均寿命"],t.minMaxStatistical["minLife"]=o["最小使用寿命"],t.minMaxStatistical["minLifeDeviceCsNumber"]=o["使用寿命最小的报废设备编号"],t.minMaxStatistical["maxLife"]=o["最大使用寿命"],t.minMaxStatistical["maxLifeDeviceCsNumber"]=o["使用寿命最大的报废设备编号"]})}},filters:{msFilter:function(t){if(t<=0)return"无";var e=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),s=Math.floor(t%864e5%36e5/6e4),n="";return e?n=n+e+"天":n+="",a?n=n+a+"小时":n+="",s?n=n+s+"分钟":n+="",n}},created:function(){this.getCollectionInfos()}},K=q,Q=(a("1312"),Object(u["a"])(K,s,n,!1,null,"69226064",null));e["default"]=Q.exports},"936e":function(t,e,a){},a10b:function(t,e,a){},cc03:function(t,e,a){"use strict";var s=a("5683"),n=a.n(s);n.a},e63e:function(t,e,a){"use strict";var s=a("50cd"),n=a.n(s);n.a},faf9:function(t,e,a){}}]);
//# sourceMappingURL=chunk-33cabd52.720ba74c.js.map