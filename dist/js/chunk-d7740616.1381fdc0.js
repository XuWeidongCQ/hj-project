(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7740616"],{"02f4":function(e,t,n){var a=n("4588"),o=n("be13");e.exports=function(e){return function(t,n){var i,l,r=String(o(t)),s=a(n),u=r.length;return s<0||s>=u?e?"":void 0:(i=r.charCodeAt(s),i<55296||i>56319||s+1===u||(l=r.charCodeAt(s+1))<56320||l>57343?e?r.charAt(s):i:e?r.slice(s,s+2):l-56320+(i-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var a=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var a=n("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"214f":function(e,t,n){"use strict";n("b0c5");var a=n("2aba"),o=n("32e9"),i=n("79e5"),l=n("be13"),r=n("2b4c"),s=n("520a"),u=r("species"),c=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=r(e),v=!i(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=v?!i(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t}):void 0;if(!v||!p||"replace"===e&&!c||"split"===e&&!d){var m=/./[f],h=n(l,f,""[e],function(e,t,n,a,o){return t.exec===s?v&&!o?{done:!0,value:m.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),x=h[0],b=h[1];a(String.prototype,e,x),o(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,n){"use strict";var a=n("aae3"),o=n("cb7c"),i=n("ebd6"),l=n("0390"),r=n("9def"),s=n("5f1b"),u=n("520a"),c=n("79e5"),d=Math.min,f=[].push,v="split",p="length",m="lastIndex",h=4294967295,x=!c(function(){RegExp(h,"y")});n("214f")("split",2,function(e,t,n,c){var b;return b="c"=="abbc"[v](/(b)*/)[1]||4!="test"[v](/(?:)/,-1)[p]||2!="ab"[v](/(?:ab)*/)[p]||4!="."[v](/(.?)(.?)/)[p]||"."[v](/()()/)[p]>1||""[v](/.?/)[p]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!a(e))return n.call(o,e,t);var i,l,r,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,v=void 0===t?h:t>>>0,x=new RegExp(e.source,c+"g");while(i=u.call(x,o)){if(l=x[m],l>d&&(s.push(o.slice(d,i.index)),i[p]>1&&i.index<o[p]&&f.apply(s,i.slice(1)),r=i[0][p],d=l,s[p]>=v))break;x[m]===i.index&&x[m]++}return d===o[p]?!r&&x.test("")||s.push(""):s.push(o.slice(d)),s[p]>v?s.slice(0,v):s}:"0"[v](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,a){var o=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,o,a):b.call(String(o),n,a)},function(e,t){var a=c(b,e,this,t,b!==n);if(a.done)return a.value;var u=o(e),f=String(this),v=i(u,RegExp),p=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(x?"y":"g"),g=new v(x?u:"^(?:"+u.source+")",m),_=void 0===t?h:t>>>0;if(0===_)return[];if(0===f.length)return null===s(g,f)?[f]:[];var y=0,I=0,C=[];while(I<f.length){g.lastIndex=x?I:0;var w,R=s(g,x?f:f.slice(I));if(null===R||(w=d(r(g.lastIndex+(x?0:I)),f.length))===y)I=l(f,I,p);else{if(C.push(f.slice(y,I)),C.length===_)return C;for(var k=1;k<=R.length-1;k++)if(C.push(R[k]),C.length===_)return C;I=y=w}}return C.push(f.slice(y)),C}]})},"4f8d":function(e,t,n){},"520a":function(e,t,n){"use strict";var a=n("0bfb"),o=RegExp.prototype.exec,i=String.prototype.replace,l=o,r="lastIndex",s=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[r]||0!==t[r]}(),u=void 0!==/()??/.exec("")[1],c=s||u;c&&(l=function(e){var t,n,l,c,d=this;return u&&(n=new RegExp("^"+d.source+"$(?!\\s)",a.call(d))),s&&(t=d[r]),l=o.call(d,e),s&&l&&(d[r]=d.global?l.index+l[0].length:t),u&&l&&l.length>1&&i.call(l[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(l[c]=void 0)}),l}),e.exports=l},"5f1b":function(e,t,n){"use strict";var a=n("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},7860:function(e,t,n){"use strict";var a=n("eeae"),o=n.n(a);o.a},a54b:function(e,t,n){"use strict";var a=n("4f8d"),o=n.n(a);o.a},b0c5:function(e,t,n){"use strict";var a=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},b10a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isPopUp?n("xu-modal",{attrs:{shown:!0,"header-shown":!0,"footer-shown":!0,"header-style":{backgroundColor:"#00a8b3",color:"#ffffff"}},on:{close:e.close}},[n("span",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.formTitle))]),n("div",{staticClass:"xu-text-level3",attrs:{slot:"content"},slot:"content"},e._l(e.renderData,function(t){return n("div",[t.additionalInfo&&"radio"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),e._l(t.additionalInfo.optional,function(a){return n("label",{staticClass:"xu-label-choose mr-integer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-choose xu-radio",attrs:{type:"radio"},domProps:{value:a,checked:e._q(t.value,a)},on:{change:function(n){return e.$set(t,"value",a)}}}),n("span",[e._v(e._s(a))])])})],2):t.additionalInfo&&"number"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control"},[n("label",{staticClass:"xu-label-text"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-input",attrs:{type:"number",disabled:0!==e.rules.length&&e.applyFormRules(t.field)},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})])]):t.additionalInfo&&"select"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control"},[n("label",{staticClass:"xu-label-text"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-input",on:{change:function(n){var a=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"value",n.target.multiple?a:a[0])}}},e._l(t.additionalInfo.optional,function(t){return n("option",[e._v("\n                                "+e._s(t)+"\n                            ")])}),0)])]):t.additionalInfo&&"textarea"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control"},[n("label",{staticClass:"xu-label-text"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-textarea",attrs:{type:"text",disabled:0!==e.rules.length&&e.applyFormRules(t.field)},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})])]):t.additionalInfo&&"date"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control"},[n("label",{staticClass:"xu-label-text"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-input",attrs:{type:"date",disabled:0!==e.rules.length&&e.applyFormRules(t.field)},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})])]):t.additionalInfo&&"checkbox"===t.additionalInfo.type?n("div",{staticClass:"xu-form-control clear"},[n("div",{staticClass:"checkbox-left"},[n("span",[e._v(e._s(t.content))])]),n("div",{staticClass:"checkbox-right"},e._l(t.additionalInfo.optional,function(a){return n("label",{staticClass:"xu-label-choose mr-integer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-choose xu-checkbox",attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(t.value)?e._i(t.value,a)>-1:t.value},on:{change:function(n){var o=t.value,i=n.target,l=!!i.checked;if(Array.isArray(o)){var r=a,s=e._i(o,r);i.checked?s<0&&e.$set(t,"value",o.concat([r])):s>-1&&e.$set(t,"value",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(t,"value",l)}}}),n("span",[e._v(e._s(a))])])}),0)]):n("div",{staticClass:"xu-form-control"},[n("label",{staticClass:"xu-label-text"},[n("span",{staticClass:"fix-width-100"},[e._v(e._s(t.content))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"formItem.value"}],staticClass:"xu-input",attrs:{type:"text",disabled:0!==e.rules.length&&e.applyFormRules(t.field)},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})])])])}),0),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xu-text-center"},[n("button",{staticClass:"xu-btn xu-btn-primary mr-integer",on:{click:e.submit}},[e._v("确认")]),n("button",{staticClass:"xu-btn xu-btn-cancel mb-integer",on:{click:e.close}},[e._v("取消")])])])]):n("div")],1)},o=[],i=(n("ac6a"),n("c41d")),l=n("3d71"),r={name:"XuForm",components:{XuModal:i["a"]},props:{isPopUp:{default:!1,type:Boolean},formTitle:{default:"表单",type:String},renderData:{default:function(){return[{content:"默认",value:"",field:""}]},type:Array},rules:{default:function(){return[]},type:Array},authRules:{default:function(){return[]},type:Array}},data:function(){return{}},methods:{close:function(){this.$emit("close")},submit:function(){var e=!1,t={};for(var n in this.renderData.forEach(function(e){t[e.field]=e.value}),t)if(!this.applyFormRules(n)&&""===t[n]){e=!0;break}if(e)Object(l["a"])("请完成所有内容再提交~","error");else{var a=this.authRules.length,o=!0;for(var i in t){for(var r=0;r<a;r++)if(i===this.authRules[r].field&&!this.authRules[r]["isPassAuth"](t[i])){o=!1,Object(l["a"])(this.authRules[r]["failAuthMsg"],"error");break}if(!o)break}o&&(this.$emit("submit",t),this.$emit("close"))}},applyFormRules:function(e){for(var t=0;t<this.rules.length;t++){var n=this.rules[t].field,a=this.rules[t].limitBy.field,o=this.rules[t].limitBy.value,i=void 0,l=!1;if(e===n){for(var r=0;r<this.renderData.length;r++)if(this.renderData[r].field===n){i=r;break}for(var s=0;s<this.renderData.length;s++)if(this.renderData[s].field===a&&String(this.renderData[s].value)===o){this.renderData[i].value="",l=!0;break}return l}}return!1}}},s=r,u=(n("7860"),n("2877")),c=Object(u["a"])(s,a,o,!1,null,"1fbd6ffb",null);t["a"]=c.exports},c41d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.shown?n("div",{staticClass:"xu-modal-backdrop",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("div",{staticClass:"xu-modal",class:{fadeIn:e.shown},style:e.modelStyle},[e.headerShown?n("div",{staticClass:"xu-modal-header",style:e.headerStyle},[n("div",{staticClass:"modal-title-wrapper"},[e._t("header",[n("div",[e._v("这是模态框标题")])])],2),n("div",{staticClass:"close-icon",on:{click:e.close}},[e._v("×")])]):e._e(),n("div",{staticClass:"xu-modal-content"},[e._t("content",[n("div",[e._v("这是模态框内容")])])],2),e.footerShown?n("div",{staticClass:"xu-modal-footer"},[e._t("footer",[n("div",[e._v("这是模态框尾部")])])],2):e._e()])]):e._e()},o=[],i={name:"xu-modal",props:{shown:{type:Boolean,default:!1},footerShown:{type:Boolean,default:!1},headerShown:{type:Boolean,default:!1},headerStyle:{},modelStyle:{}},methods:{close:function(){this.$emit("close")}}},l=i,r=(n("a54b"),n("2877")),s=Object(r["a"])(l,a,o,!1,null,"52ce554c",null);t["a"]=s.exports},d26e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-views-wrapper"},[n("div",{staticClass:"xu-row"},[n("div",{staticClass:"xu-col-12"},[n("role-detail-table")],1)])])},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xubox"},[n("div",{staticClass:"xubox-title"},[n("span",[e._v("角色情况")]),n("span",{staticClass:"xu-indicator xu-indicator-add xu-float-right",on:{click:e.addNewRole}},[e._v("新增角色")])]),n("div",{staticClass:"xubox-content"},[n("table",{staticClass:"xu-table xu-table-center xu-table-hover xu-table-strip"},[e._m(0),n("tbody",e._l(e.roleInfos,function(t){return n("tr",{key:t.roleId},[n("td",[e._v(e._s(t.roleId))]),n("td",[e._v(e._s(t.roleName))]),n("td",[e._v(e._s(t.menuList))]),n("td",[e._v(e._s(t.createTime))]),n("td",[e._v(e._s(t.remark))]),n("td",[n("span",{staticClass:"xu-indicator xu-indicator-edit",on:{click:function(n){return e.editRole(t)}}},[e._v("修改")]),n("span",{staticClass:"xu-indicator xu-indicator-delete",on:{click:function(n){return e.delRoleInfo(t.roleId)}}},[e._v("删除")])])])}),0)])]),e.isFormShown?n("xu-form",{attrs:{"is-pop-up":!0,"form-title":e.formTitle,"render-data":e.formRenderData},on:{submit:function(t){return e.submit(t)},close:function(t){e.isFormShown=!1}}}):e._e()],1)},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"xu-bg-silver"},[n("tr",[n("th",[e._v("#ID")]),n("th",[e._v("角色名称")]),n("th",[e._v("可查看")]),n("th",[e._v("创建时间")]),n("th",[e._v("备注")]),n("th",[e._v("操作")])])])}],r=(n("28a5"),n("7f7f"),n("ac6a"),n("b10a")),s={name:"RoleDetailTable",components:{XuForm:r["a"]},data:function(){return{roleInfos:[],menuInfos:[],isFormShown:!1,formRenderData:[],formTitle:"",submitType:0,selectedRole:null}},methods:{getRoleCollectionInfos:function(){var e=this;this.$Http["roleManage"]["getRoleInfos"]().then(function(t){e.roleInfos=[],t.forEach(function(t){var n=t.menuList;e.roleInfos.push({roleId:t["id"],roleName:t["roleName"],menuList:n.map(function(e){return e["id"]+"-"+e["name"]}).join("，")||"无任何权限",remark:t["remark"]||"无",createTime:t["createTime"]})})})},getMenuInfos:function(){var e=this;this.menuInfos=[],this.$Http["roleManage"]["getMenuInfos"]().then(function(t){t.forEach(function(t){e.menuInfos.push({menuId:t["id"],menuName:t["name"]})})})},addNewRole:function(){this.formTitle="添加角色",this.submitType=0,this.formRenderData=[{content:"角色名称：",value:"",field:"roleName"},{content:"权限：",value:[],field:"menuList",additionalInfo:{type:"checkbox",optional:this.menuInfos.map(function(e){return e["menuName"]})}},{content:"备注：",value:"无",field:"remark",additionalInfo:{type:"textarea"}}],this.isFormShown=!0},delRoleInfo:function(e){var t=this;this.$Http["roleManage"]["delRoleInfo"](e).then(function(e){e&&t.getRoleCollectionInfos()})},editRole:function(e){var t;this.selectedRole=e,t="无任何权限"===e["menuList"]?[]:e["menuList"].split("，").map(function(e){return e.split("-")[1]}),this.formTitle="修改角色信息",this.submitType=1,this.formRenderData=[{content:"角色名称：",value:e["roleName"],field:"roleName"},{content:"权限：",value:t,field:"menuList",additionalInfo:{type:"checkbox",optional:this.menuInfos.map(function(e){return e["menuName"]})}},{content:"备注：",value:e["remark"],field:"remark",additionalInfo:{type:"textarea"}}],this.isFormShown=!0},submit:function(e){var t=this;switch(e["menuList"]=e["menuList"].map(function(e){var n=0;return t.menuInfos.forEach(function(t){t["menuName"]===e&&(n=t["menuId"])}),{id:n}}),this.submitType){case 0:this.$Http["roleManage"]["postRoleInfo"](e).then(function(e){e&&t.getRoleCollectionInfos()});break;case 1:console.log(e),e["id"]=this.selectedRole["roleId"],this.$Http["roleManage"]["editRoleInfo"](e).then(function(e){e&&t.getRoleCollectionInfos()});break}}},created:function(){this.getRoleCollectionInfos(),this.getMenuInfos()}},u=s,c=n("2877"),d=Object(c["a"])(u,i,l,!1,null,"367775bc",null),f=d.exports,v={name:"RoleManage",components:{RoleDetailTable:f},methods:{},created:function(){}},p=v,m=Object(c["a"])(p,a,o,!1,null,"44569c95",null);t["default"]=m.exports},eeae:function(e,t,n){}}]);
//# sourceMappingURL=chunk-d7740616.1381fdc0.js.map