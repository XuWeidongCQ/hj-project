(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d8b3"],{d26e:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-views-wrapper"},[n("div",{staticClass:"xu-row"},[n("div",{staticClass:"xu-col-12"},[n("role-detail-table")],1)])])},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xubox"},[n("div",{staticClass:"xubox-title"},[n("span",[e._v("角色情况")]),n("span",{staticClass:"xu-indicator xu-indicator-add xu-float-right",on:{click:e.addNewRole}},[e._v("新增角色")])]),n("div",{staticClass:"xubox-content"},[n("table",{staticClass:"xu-table xu-table-center xu-table-hover xu-table-strip"},[e._m(0),n("tbody",e._l(e.roleInfos,(function(t){return n("tr",{key:t.roleId},[n("td",[e._v(e._s(t.roleId))]),n("td",[e._v(e._s(t.roleName))]),n("td",[e._v(e._s(t.menuList))]),n("td",[e._v(e._s(t.createTime))]),n("td",[e._v(e._s(t.remark))]),n("td",[n("span",{staticClass:"xu-indicator xu-indicator-edit",on:{click:function(n){return e.editRole(t)}}},[e._v("修改")]),n("span",{staticClass:"xu-indicator xu-indicator-delete",on:{click:function(n){return e.delRoleInfo(t.roleId)}}},[e._v("删除")])])])})),0)])]),e.isFormShown?n("xu-form",{attrs:{"is-pop-up":!0,"form-title":e.formTitle,"render-data":e.formRenderData},on:{submit:function(t){return e.submit(t)},close:function(t){e.isFormShown=!1}}}):e._e()],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"xu-bg-silver"},[n("tr",[n("th",[e._v("#ID")]),n("th",[e._v("角色名称")]),n("th",[e._v("可查看")]),n("th",[e._v("创建时间")]),n("th",[e._v("备注")]),n("th",[e._v("操作")])])])}],l=(n("28a5"),n("7f7f"),n("ac6a"),n("b10a")),r={name:"RoleDetailTable",components:{XuForm:l["a"]},data:function(){return{roleInfos:[],menuInfos:[],isFormShown:!1,formRenderData:[],formTitle:"",submitType:0,selectedRole:null}},methods:{getRoleCollectionInfos:function(){var e=this;this.$Http["roleManage"]["getRoleInfos"]().then((function(t){e.roleInfos=[],t.forEach((function(t){var n=t.menuList;e.roleInfos.push({roleId:t["id"],roleName:t["roleName"],menuList:n.map((function(e){return e["id"]+"-"+e["name"]})).join("，")||"无任何权限",remark:t["remark"]||"无",createTime:t["createTime"]})}))}))},getMenuInfos:function(){var e=this;this.menuInfos=[],this.$Http["roleManage"]["getMenuInfos"]().then((function(t){t.forEach((function(t){e.menuInfos.push({menuId:t["id"],menuName:t["name"]})}))}))},addNewRole:function(){this.formTitle="添加角色",this.submitType=0,this.formRenderData=[{content:"角色名称：",value:"",field:"roleName"},{content:"权限：",value:[],field:"menuList",additionalInfo:{type:"checkbox",optional:this.menuInfos.map((function(e){return e["menuName"]}))}},{content:"备注：",value:"无",field:"remark",additionalInfo:{type:"textarea"}}],this.isFormShown=!0},delRoleInfo:function(e){var t=this;this.$Http["roleManage"]["delRoleInfo"](e).then((function(e){e&&t.getRoleCollectionInfos()}))},editRole:function(e){var t;this.selectedRole=e,t="无任何权限"===e["menuList"]?[]:e["menuList"].split("，").map((function(e){return e.split("-")[1]})),this.formTitle="修改角色信息",this.submitType=1,this.formRenderData=[{content:"角色名称：",value:e["roleName"],field:"roleName"},{content:"权限：",value:t,field:"menuList",additionalInfo:{type:"checkbox",optional:this.menuInfos.map((function(e){return e["menuName"]}))}},{content:"备注：",value:e["remark"],field:"remark",additionalInfo:{type:"textarea"}}],this.isFormShown=!0},submit:function(e){var t=this;switch(e["menuList"]=e["menuList"].map((function(e){var n=0;return t.menuInfos.forEach((function(t){t["menuName"]===e&&(n=t["menuId"])})),{id:n}})),this.submitType){case 0:this.$Http["roleManage"]["postRoleInfo"](e).then((function(e){e&&t.getRoleCollectionInfos()}));break;case 1:console.log(e),e["id"]=this.selectedRole["roleId"],this.$Http["roleManage"]["editRoleInfo"](e).then((function(e){e&&t.getRoleCollectionInfos()}));break}}},created:function(){this.getRoleCollectionInfos(),this.getMenuInfos()}},u=r,c=n("2877"),f=Object(c["a"])(u,a,s,!1,null,"367775bc",null),d=f.exports,m={name:"RoleManage",components:{RoleDetailTable:d},methods:{},created:function(){}},h=m,p=Object(c["a"])(h,o,i,!1,null,"44569c95",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d21d8b3.cf07e1c0.js.map